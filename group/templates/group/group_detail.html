{% extends 'base.html' %}


{% load static humanize %}

{% block content %}

    {% include 'parciais/_navbar.html' %}
    <div class="container">
           
        <div class="row">
            
            <div class="col-md-12 order-4">
                <div class="container-md p-3" id='wrap'>
                    <div class="btn-group">            
                        <a href="{% url 'group_all' %}">
                            <button type="button" class="btn btn-sm btn-outline-secondary">Voltar</button>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 order-0">
                <div class="container-md p-3" id='wrap'>
                    <div class="col p-3">
                        <h4 class=text-center>Cadastro</h4>
                        <div class="d-flex justify-content-center">
                            <table class="table table-striped mt-5">
                                <tbody>
                                    <tr>
                                        <th scope="col">Criado em:</th>
                                        <td>{{ group.create }}</td>
                                    </tr>
                                    <tr>
                                        <th scope="col">Modificado em:</th>
                                        <td>{{ group.modified }}</td>
                                    </tr>
                                    <tr>
                                        <th scope="col">Usuário:</th>
                                        <td>{{ group.user.first_name }} {{ group.user.last_name }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>        
            </div>
            <div class="col-md-4 order-1">
                <div class="container-md p-3" id='wrap'>
                    <div class="col p-3">
                        <h4 class=text-center>Graduação</h4>
                        <div class="d-flex justify-content-center">
                            <table class="table table-striped mt-5">
                                <tbody>
                                    <tr>
                                        <th scope="col">Escola:</th>
                                        <td>{{ group.school.name }}</td>
                                    </tr>
                                    <tr>
                                        <th scope="col">Graduação:</th>
                                        <td>{{ group.graduation.name }} {{ group.identification_group }}</td>
                                    </tr>
                                    <tr>
                                        <th scope="col">Prof. Responsável:</th>
                                        <td>{{ group.teacher_manager.first_name }} {{ group.teacher_manager.last_name }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 order-3">
                <div class="container-md p-3" id='wrap'>
                    <div class="col p-3">
                        <h4 class=text-center>Detalhes</h4>
                        <div class="d-flex justify-content-center">
                            <table class="table table-striped mt-5">
                                <tbody>
                                    <tr>
                                        <th scope="col">Local</th>
                                        <td>{{ group.localization.get_struct_type_addressbase_display }} {{ group.localization.name }}</td>
                                    </tr>
                                    <tr>
                                        <th scope="col">Medidas:</th>
                                        <td>A {{ group.localization.height }}m | L {{ group.localization.width }}m | C {{ group.localization.length }}m | A {{ group.localization.area }}m² | P {{ group.localization.perimeter }}m</td>                                        
                                    </tr>
                                    <tr>
                                        <th scope="col">Vagas:</th>
                                        <td>{{ group.localization.vagas }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>        
            </div>

            <div class="col-12 order-5">
                <div class="container-md p-3" id='wrap'>
                    <div class="col p-3">
                        <h4 class=text-center>Alunos Matriculados</h4>
                        <table class="table table-striped table-sm table-success my-3">
                            <thead>
                                <tr class="">
                                    <th>#</th>
                                    <th class="">Matricula</th>
                                    <th class="">Nome</th>
                                    <th class="">Responsáveis</th>
                                    <th class="">E-mail</th>
                                    <th class="">Telefone</th>
                                    <th class=""></th>
                                    <th class=""></th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for student in group.students.all %}
                                    <tr >
                                        <td class="text-center">{{ forloop.counter }}</td>
                                        <td class="text-end">{{ student.id }}</td>
                                        {% if perms.student.view_group %}
                                            <a href="{% url 'student_detail' student.id %}" student.id ><td>{{ student.full_name }}</td></a>
                                        {% else %}
                                            <td>{{ student.full_name }}</td>
                                        {% endif %}
                                        <td >Mãe: {{ student.mother_name }} 
                                        <br>Pai: {{ student.mother_name }}</td>
                                        <td >{{ student.email }}</td>
                                        <td >({{ student.phone_ddd }}) {{ student.phone_number }}</td>
                                                    
                                        {% if perms.student.delete_group %}
                                            <td><a href="{% url 'group_delete' group.id %}">Apagar</a></td>
                                        {% endif %}
                                        {% if perms.student.add_group %}
                                            <td><a href="{% url 'student_update' student.id %}">Alterar</a></td>
                                        {% endif %}

                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </div>
    </div>
{% endblock  %}
